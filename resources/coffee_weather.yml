resources:
  jobs:
    coffee_weather:
      name: ${bundle.target}_${workspace.current_user.userName}_Coffee Weather
      compute:
        - compute_key: Default
          spec:
            kind: SERVERLESS_PREVIEW
      tasks:
        - task_key: ingest
          email_notifications: {}
          notebook_task:
            notebook_path: ../notebooks/my_notebook.ipynb
            source: WORKSPACE
          compute_key: Default
          run_if: ALL_SUCCESS
          notification_settings: {}
          libraries:
            - pypi:
                package: openmeteo-requests==1.2.0
            - pypi:
                package: requests-cache==1.2.0
            - pypi:
                package: retry-requests==2.0.0
            - pypi:
                package: geopy==2.4.1
          webhook_notifications: {}
      parameters:
        - name: schema_name
          default: coffee_weather_${bundle.target}
      max_concurrent_runs: 1
      email_notifications: {}
      webhook_notifications: {}
